logLevel: info
providers:
  deepseek:
    apiKey: REPLACE_ME
    baseUrl: https://api.deepseek.com
    model: deepseek-chat
    timeoutMs: 120000
    maxRetries: 3
    concurrency: 2
  openrouter:
    apiKey: REPLACE_ME
    baseUrl: https://openrouter.ai/api/v1
    model: openai/gpt-4o-mini
    timeoutMs: 120000
    maxRetries: 3
    concurrency: 2
    app:
      httpReferer: https://example.com
      title: story-trans
embeddings:
  model: text-embedding-3-small
  concurrency: 4
vectordb:
  path: lancedb
  table: chunks
ingest:
  originalChaptersPath: data/original
  translatedChaptersPath: data/translated
  taskChaptersPath: data/task
  metadataPath: data/metadata
  # Language settings for bilingual content
  language:
    original: en      # Original content language (en, zh, ja, ko, etc.)
    translated: vi    # Translated content language (vi, th, id, etc.)
  chunk:
    chunkSize: 1200
    chunkOverlap: 150
    strategy: paragraph     # Use 'paragraph' for story translation
    normalize: true
    # Group consecutive short paragraphs (dialogue, etc.)
    groupShortParagraphs: true
    groupShortThreshold: 80   # Chars - paragraphs shorter than this are "short"
    groupMaxSize: 4           # Max paragraphs per group
    # Context window for better embeddings
    contextWindow:
      prevChars: 500
      nextChars: 300
      enabled: true
  enrichment:
    enabled: false
    maxUrls: 5
    maxCharsPerUrl: 20000
    maxConcurrentFetches: 4
  llm:
    enabled: false
    model: deepseek-chat
  indexing:
    createVectorIndex: true
    createFtsIndex: true
    ftsColumn: text
    vectorColumn: vector
# Translation pipeline model configuration
translation:
  stage1Model: deepseek-chat          # Stage 1: Draft generation
  stage2Model: deepseek-reasoner      # Stage 2: Synthesis with reasoning
  stage3Model: deepseek-chat          # Stage 3: Linkage verification
  openrouterStage1Model: xiaomi/mimo-v2-flash:free  # Optional 2nd opinion
braveSearch:
  enabled: false
  apiKey: REPLACE_ME
  baseUrl: https://api.search.brave.com/res/v1
  country: US
  searchLang: en
  count: 5
  extraSnippets: true
  timeoutMs: 20000
  maxRetries: 2
reranker:
  enabled: false
  jinaApiKey: REPLACE_ME
  baseUrl: https://api.jina.ai/v1
  model: jina-reranker-v2-base-multilingual
  topN: 10
  maxDocuments: 50
  timeoutMs: 30000
  maxRetries: 2
  concurrency: 2
